" vim: foldmethod=marker
" vim: foldcolumn=3
" vim: foldlevel=0

" basic {{{1
set modeline
set modelines=3
set nocompatible

" color scheme {{{2
syntax enable
colorscheme desert

" search {{{2
set ignorecase
set smartcase
set wrapscan
set hlsearch
set incsearch
cnoremap <expr> / getcmdtype() == '/' ? '\/' : '/'
cnoremap <expr> ? getcmdtype() == '?' ? '\?' : '?'

nnoremap <expr> n <SID>search_forward_p() ? 'nzv' : 'Nzv'
nnoremap <expr> N <SID>search_forward_p() ? 'Nzv' : 'nzv'
vnoremap <expr> n <SID>search_forward_p() ? 'nzv' : 'Nzv'
vnoremap <expr> N <SID>search_forward_p() ? 'Nzv' : 'nzv'
function! s:search_forward_p()
    return exists('v:searchforward') ? v:searchforward : 1
endfunction

" visual {{{2
set showtabline=2
set tabstop=4
set expandtab
set autoindent
set backspace=indent,eol,start
set showmatch
set wildmenu
set formatoptions+=mM
set nonumber
set ruler
set list
set listchars=tab:\ \ ,trail:_,eol:\ ,extends:>,precedes:>
set wrap
set cmdheight=2
set showcmd
set smartindent
set smarttab
set shiftwidth=4
set noequalalways
set cursorline
augroup cch
    autocmd! cch
    autocmd WinLeave * set nocursorline
    autocmd WinEnter,BufRead * set cursorline
augroup END
:hi clear CursorLine
:hi CursorLine gui=underline
highlight CursorLine ctermbg=black guibg=black

" fold {{{2
set foldmethod=marker
set foldlevel=0

" buffer {{{2
set hidden
set autoread

" system {{{2
let mapleader=","
let maplocalleader="\\"

" mapping {{{1
nnoremap <C-j> <Esc>
cnoremap <C-j> <Esc>
inoremap <C-j> <Esc>
vnoremap <C-j> <Esc>

nnoremap ; :
nnoremap : ;
nnoremap > %
nnoremap < %

cnoremap <C-f> <Right>
cnoremap <C-b> <Left>
cnoremap <C-d> <Delete>

imap () ()<Left>
imap [] []<Left>
imap {} {}<Left>
imap "" ""<Left>
imap '' ''<Left>

nnoremap <silent> <Esc><Esc> :nohlsearch<CR><Esc>
nnoremap <silent> <C-j><C-j> :nohlsearch<CR><Esc>

nnoremap <Leader><Leader> :<C-u>Ex<CR>

" tab {{{2
nnoremap [Tab] <Nop>
nmap <C-t> [Tab]
nnoremap [Tab]n :<C-u>tabnew<CR>
nnoremap [Tab]h :<C-u>tabp<CR>
nnoremap [Tab]l :<C-u>tabn<CR>
nnoremap [Tab]0 :<C-u>tabfirst<CR>
nnoremap [Tab]$ :<C-u>tablast<CR>
nnoremap << :<C-u>tabp<CR>
nnoremap >> :<C-u>tabn<CR>

" command {{{1
command! ToUTF8 set fileencoding=utf-8
command! ToEUC  set fileencoding=euc-jp
command! ToSJIS set fileencoding=sjis
command! Reload source $HOME/.vimrc
